# STM32F407VET6 HAL 外设 Demo 项目

在多个外设 Demo 项目中，我基于 STM32F407VET6 和 STM32 HAL 库开发了各类实用的外设驱动示例。这些 Demo 项目旨在展示如何利用 HAL 库进行硬件外设驱动的快速原型开发，并为后续集成更多功能（如图形用户界面、传感器数据采集、通信接口等）提供基础。  
  
目前，我的第一个成功实现的 Demo 项目是 **ILI9341 Demo**，用于驱动基于 SPI 连接的 ILI9341 TFT 显示屏，其它 Demo 项目正在陆续开发中或已实现部分功能。  

---

## Demo 项目列表

下表列出了目前各个外设 Demo 项目的名称、外设类型、实现状态及相关备注：

| Demo 项目名称   | 外设类型                 | 状态      | 备注                                                         |
|-----------------|--------------------------|-----------|--------------------------------------------------------------|
| **ILI9341 Demo**  | ILI9341 TFT 显示屏       | 已实现    | 基于 SPI，通过 HAL 库对 ILI9341 进行了初始化、窗口设置与数据传输，演示了基本图像显示和颜色填充。 |

---

## ILI9341 Demo 详细介绍

### 项目简介

**ILI9341 Demo** 是我第一个成功实现的外设驱动示例。该项目利用 STM32F407VET6 的 SPI 总线和 HAL 库，驱动 ILI9341 TFT 显示屏进行图像数据显示。项目中实现了屏幕初始化、绘图区域设置以及像素数据传输，并支持使用 16 位 RGB565 色彩格式进行颜色填充。

### 关键技术点

- **SPI 数据传输**  
  采用 HAL_SPI_Transmit 实现 SPI 数据写入，封装了对 ILI9341 的命令与数据传输接口。
  在spi.c中补充代码

```c
void SPI_WriteByte(SPI_HandleTypeDef *hspi, uint8_t data)
{
    // 使用 HAL_MAX_DELAY 阻塞到传输完成；也可根据需求设置超时值。
    if (HAL_SPI_Transmit(hspi, &data, 1, HAL_MAX_DELAY) != HAL_OK)
    {
        // 传输错误，依据实际需要进行错误处理，比如调用 Error_Handler() 
        // 或者打印调试信息。
        Error_Handler();
    }
}
```
